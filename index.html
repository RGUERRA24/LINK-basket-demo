<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>üõí Mon Panier LINK</title>
 <style>
  body {
    font-family: 'Segoe UI', sans-serif;
    background: #F2F6F7;
    margin: 0;
    padding: 0;
    color: #333;
    font-size: clamp(22px, 4.5vw, 28px); /* üîπ texte g√©n√©ral plus gros */
    line-height: 1.9;
  }

  header {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 1em 1.5em;
    background: white;
    border-bottom: 4px solid #0076A1;
    position: sticky;
    top: 0;
    z-index: 1000;
    flex-wrap: wrap;
    gap: 14px;
  }

  header svg {
    height: clamp(38px, 8vw, 55px);
    width: auto;
  }

  .panier-icon {
    position: absolute;
    right: 25px;
    top: 18px;
    font-size: clamp(2.5rem, 8vw, 3rem);
    cursor: pointer;
    color: #0076A1;
  }

.panier-count {
  position: absolute;
  top: -12px;
  right: -16px;
  background: #e74c3c;
  color: white;
  font-size: clamp(1.1rem, 3.8vw, 1.6rem);
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  box-shadow: 0 0 6px rgba(0,0,0,0.25);
}

  .container {
    max-width: 900px;
    margin: 60px auto;
    padding: 0 25px;
  }

  h2 {
    font-size: clamp(2rem, 6.5vw, 3rem); /* üîπ titre plus grand */
    margin-bottom: 30px;
    color: #0076A1;
    text-align: center;
    letter-spacing: .05rem;
  }

  ul {
    list-style: none;
    padding: 0;
  }

  ul li {
    background: white;
    padding: clamp(22px, 5vw, 30px);
    margin-bottom: 18px;
    border-radius: 16px;
    font-size: clamp(1.4rem, 5.5vw, 2rem); /* üîπ produits plus gros */
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 14px;
    flex-wrap: wrap;
  }

  .li-left {
    flex: 1;
  }

  .li-right {
    text-align: right;
    font-weight: bold;
  }

  .remove-btn {
    background: transparent;
    border: none;
    font-size: 1.8rem;
    color: #e74c3c;
    cursor: pointer;
    margin-left: 12px;
    transition: transform 0.2s ease;
  }

  .remove-btn:hover {
    transform: scale(1.25);
  }

  .btn {
    display: inline-block;
    padding: clamp(20px, 5vw, 28px) clamp(30px, 8vw, 45px);
    margin: 14px;
    font-size: clamp(1.5rem, 5.5vw, 2rem); /* üîπ boutons plus gros */
    font-weight: bold;
    border-radius: 14px;
    cursor: pointer;
    border: 4px solid transparent;
    text-decoration: none;
    transition: all 0.3s ease;
  }

  .btn-second {
    color: #0076A1;
  }

  .btn-white {
    background-color: white;
    color: #0076A1;
    border: 4px solid #0076A1;
  }

  .total {
    text-align: right;
    font-size: clamp(1.6rem, 5.5vw, 2.2rem); /* üîπ total plus lisible */
    font-weight: bold;
    color: #0076A1;
    margin-top: 30px;
  }

  .modal {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.3s ease, visibility 0.3s;
  }

  .modal.active {
    visibility: visible;
    opacity: 1;
  }

  .modal-content {
    background: white;
    padding: clamp(28px, 7vw, 40px);
    border-radius: 14px;
    text-align: center;
    box-shadow: 0 8px 28px rgba(0,0,0,0.25);
    animation: pop 0.4s ease;
    font-size: clamp(1.6rem, 5.5vw, 2rem);
    color: #0076A1;
  }

  @keyframes pop {
    from { transform: scale(0.8); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  .plus-one {
    position: absolute;
    font-weight: bold;
    color: #27ae60;
    font-size: clamp(1.4rem, 5vw, 1.8rem);
    opacity: 0;
    animation: fly 1s ease forwards;
  }

  @keyframes fly {
    0% { opacity: 1; transform: translateY(0) scale(1); }
    80% { opacity: 1; transform: translateY(-40px) scale(1.2); }
    100% { opacity: 0; transform: translateY(-60px) scale(0.8); }
  }

  @media (max-width: 600px) {
    .btn {
      width: 92%;
      margin: 12px auto;
      display: block;
    }
  }
</style>

</head>
<body>
  <header>
  <!-- Logo SVG LINK Mobility --> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 30.5"><path class="LINK_Mobility_Logo_svg__st0" d="M34.6.4C34 .2 33.4.1 32.7 0c-.8-.1-1.6 0-2.3.1-.8.1-1.6.3-2.4.6-.7.2-1.4.5-2.1.9-.6.3-1.2.7-1.7 1.2-.4.4-.8.8-1 1.4-.2.3-.3.8-.2 1.3.1.5.4.8.8 1.1.5.4 1.1.6 1.8.7.6.1 1.2.2 1.7.2h.9c1-.1 2-.3 2.9-.6.9-.3 1.8-.7 2.6-1.1.7-.4 1.3-.9 1.8-1.5.4-.5.7-1.1.8-1.6.1-.5-.1-1-.4-1.3-.3-.5-.8-.8-1.3-1z"></path><path class="LINK_Mobility_Logo_svg__st0" d="M32.8 11.9c-.7-.5-1.6-.9-2.5-1.1-1-.2-2-.3-3-.3-1.7.1-3.3-.1-4.5-.4-1.2-.3-2.1-.8-2.8-1.4-.6-.6-1-1.3-1.1-2-.1-.7.1-1.5.5-2.3.2-.5.3-.9.3-1.2-.1-.3-.3-.6-.6-.8-.4-.2-.8-.4-1.2-.4-.6-.1-1.1-.1-1.7 0-.7.1-1.3.2-1.9.5-.7.2-1.3.5-1.9.8-.6.3-1.1.7-1.6 1.1-.5.4-.9.8-1.3 1.2-.3.4-.5.8-.6 1.3-.1.3 0 .7.2 1 .2.3.5.5 1 .7.4.1.8.2 1.3.2h.5c1.1-.1 2.2 0 3.2.3s1.7.7 2.3 1.3c.6.7 1 1.5 1.1 2.5.1 1-.1 2.3-.7 3.6-.4.8-.5 1.6-.5 2.5 0 .8.3 1.6.8 2.3.5.8 1.3 1.4 2.1 1.8 1.1.5 2.2.8 3.4.9 1.3.1 2.7-.1 4-.4 1.3-.4 2.5-.9 3.6-1.6 1-.7 1.9-1.5 2.6-2.5.6-.8 1-1.8 1.1-2.9.1-.9-.1-1.8-.5-2.6-.4-.9-.9-1.6-1.6-2.1z"></path><path class="LINK_Mobility_Logo_svg__st0" d="M12.9 12.1c-.5-.4-1.1-.6-1.7-.7-.7-.1-1.5-.1-2.2.1-.9.2-1.7.4-2.5.8s-1.6.8-2.4 1.4c-.7.5-1.4 1.1-2 1.7-.5.6-1 1.2-1.4 1.9-.4.6-.6 1.3-.7 2-.1.6 0 1.2.3 1.7.3.4.7.8 1.2 1 .7.3 1.4.4 2.1.3.7 0 1.3-.1 1.9-.3l.9-.3c1.1-.4 2.1-.9 3-1.6.9-.6 1.7-1.3 2.4-2.1.6-.7 1.1-1.5 1.5-2.3.3-.8.4-1.5.3-2.1.1-.6-.2-1.1-.7-1.5zM46 19.1V1.9h-3.1v17.4c0 2.3 1.3 4.3 4.2 4.3H49v-2.7h-1.4c-1.2 0-1.6-.6-1.6-1.8zM52.6 1.8h3.3v3.3h-3.3zM52.7 8.1h3.1v15.5h-3.1zM67.7 8c-1.6 0-3 .6-4.1 1.7V8.1h-3.1v15.5h3.1v-9.4c0-2.4 1.5-3.4 3.2-3.4s3.1 1 3.1 3.4v9.4H73v-9.9c0-1.7-.4-3.2-1.6-4.4-.8-.8-2.1-1.3-3.7-1.3zM90.7 8.1H87l-6 7.2V1.9h-3.2v21.7H81v-4.5l2.2-2.6 4.4 7.1h3.8l-6-9.4zM116.8 8.1c-2.3 0-4.1 1-5.2 2.8-.9-1.8-2.7-2.8-4.9-2.8-1.8 0-3.4.7-4.6 2V8.3h-1.6v15.3h1.6v-9.5c0-2.9 1.6-4.6 4.3-4.6s4.2 1.6 4.2 4.6v9.5h1.6v-9.8c0-2.6 1.7-4.3 4.3-4.3 2.7 0 4.2 1.6 4.2 4.6v9.5h1.6v-9.8c0-1.8-.6-3.3-1.6-4.3-.9-.9-2.3-1.4-3.9-1.4zM132.6 8.1c-1.7 0-3.2.6-4.3 1.7-1.6 1.6-1.9 4-1.9 6.2s.3 4.6 1.9 6.2c1.1 1.1 2.5 1.7 4.3 1.7 1.7 0 3.2-.6 4.3-1.7 1.6-1.6 1.9-4 1.9-6.2s-.3-4.6-1.9-6.2c-1.1-1.1-2.6-1.7-4.3-1.7zm3.2 13c-1.8 1.7-4.6 1.7-6.4 0-1.3-1.3-1.4-3.3-1.4-5.1s.1-3.9 1.4-5.1c1.8-1.7 4.6-1.7 6.4 0 1.3 1.3 1.4 3.3 1.4 5.1s-.1 3.8-1.4 5.1zM149.2 8.1c-1.7 0-3.2.4-4.6 2.2V.9H143v22.7h1.6v-2c1.3 1.8 2.8 2.2 4.6 2.2 1.6 0 3-.5 3.8-1.3 1.6-1.6 2-4.1 2-6.5s-.4-5-2-6.5c-.8-.9-2.2-1.4-3.8-1.4zm-.2 14.3c-3.8 0-4.3-3.2-4.3-6.4s.6-6.4 4.3-6.4 4.3 3.2 4.3 6.4-.6 6.4-4.3 6.4zM159 .9h2v2h-2zM159.1 8.3h1.6v15.3h-1.6zM167.4 19.6V.9h-1.6v18.7c0 2.4 1.2 4 3.7 4h1.4v-1.4h-1.1c-1.8 0-2.4-.9-2.4-2.6zM173.8.9h2v2h-2zM174 8.3h1.6v15.3H174zM182.7 3.3h-1.6v4.9H179v1.2h2.1v10.1c0 2.3 1.3 4 3.7 4h1.4v-1.4h-1.1c-1.6 0-2.4-1-2.4-2.5V9.5h3.5V8.3h-3.5v-5zM198.2 8.3l-4.6 13.4L189 8.3h-1.8l5.6 15.3-1.2 3.4c-.6 1.5-1.1 2.1-2.8 2.1h-.6v1.4h.8c1 0 2.1-.3 2.9-1 .4-.4.8-1 1-1.8L200 8.2l-1.8.1z"></path></svg>
    <div class="panier-icon" id="panier-icon">üõí
      <span class="panier-count" id="panier-count">0</span>
    </div>
  </header>
  
  <div class="container">
    <h2>üéÑüéÅ MA LISTE</h2>
    <ul id="liste-cadeaux"></ul>
    <div class="total" id="total"></div>
  </div>

  <div id="buttons-container" style="margin-top: 15px; text-align: center;">
    <a href="https://www.linkmobility.com/fr/testez-gratuitement" class="btn btn-white">üõí FINALISER LA COMMANDE</a><br>
    <button id="clearList" class="btn btn-second">‚ùå Effacer le panier</button>
  </div>

  <div class="modal" id="modal">
    <div class="modal-content" id="modal-content"></div>
  </div>

  <script>
    function getProduit() {
      if (window.location.hash) {
        const hash = window.location.hash.substring(1);
        const params = new URLSearchParams(hash);
        return params.get("produit");
      }
      return null;
    }

    const produitNom = getProduit();

    function getListeCadeaux() {
      return JSON.parse(localStorage.getItem("listeCadeaux")) || [];
    }

    function setListeCadeaux(liste) {
      localStorage.setItem("listeCadeaux", JSON.stringify(liste));
    }

    function getPrixProduit(nom) {
      let prixData = JSON.parse(localStorage.getItem("prixProduits")) || {};
      if (!prixData[nom]) {
        prixData[nom] = Math.floor(Math.random() * 141) + 10; // 10-150 ‚Ç¨
        localStorage.setItem("prixProduits", JSON.stringify(prixData));
      }
      return prixData[nom];
    }

    function afficherListe() {
      const ul = document.getElementById("liste-cadeaux");
      const totalDiv = document.getElementById("total");
      const buttons = document.getElementById("buttons-container");

      ul.innerHTML = "";
      const liste = getListeCadeaux();

      if (liste.length === 0) {
        ul.innerHTML = "<li style='text-align:center; color:#666;'>Aucun produit dans votre panier.</li>";
        totalDiv.textContent = "";
        buttons.style.display = "none";
        return;
      }

      buttons.style.display = "block";
      let total = 0;

      liste.forEach((nom, index) => {
        const li = document.createElement("li");
        const prix = getPrixProduit(nom);
        total += prix;
        li.innerHTML = `
          <div class="li-left">${nom}</div>
          <div class="li-right">${prix} ‚Ç¨ 
            <button class="remove-btn" title="Supprimer" data-index="${index}">‚ùå</button>
          </div>`;
        ul.appendChild(li);
      });

      totalDiv.textContent = "Total : " + total.toFixed(2) + " ‚Ç¨";

      // √©couteurs de suppression
      document.querySelectorAll(".remove-btn").forEach(btn => {
        btn.addEventListener("click", e => {
          const index = e.target.dataset.index;
          supprimerProduit(index);
        });
      });
    }

    function supprimerProduit(index) {
      let liste = getListeCadeaux();
      liste.splice(index, 1);
      setListeCadeaux(liste);

      // Retirer du panier aussi
      let panier = JSON.parse(localStorage.getItem("panier")) || [];
      panier.splice(index, 1);
      localStorage.setItem("panier", JSON.stringify(panier));

      afficherListe();
      majPanier();
    }

    function ajouterAuPanier(produitNom) {
      let panier = JSON.parse(localStorage.getItem("panier")) || [];
      panier.push({ id: Date.now(), nom: produitNom });
      localStorage.setItem("panier", JSON.stringify(panier));
      return panier;
    }

    function majPanier() {
      let panier = JSON.parse(localStorage.getItem("panier")) || [];
      document.getElementById("panier-count").textContent = panier.length;
    }

    function afficherModal(produitNom) {
      const modal = document.getElementById("modal");
      const modalContent = document.getElementById("modal-content");
      modalContent.textContent = `üéÅ ${produitNom} ajout√© au panier !`;
      modal.classList.add("active");
      setTimeout(() => modal.classList.remove("active"), 1500);
    }

    function animationPlusUn() {
      const panierIcon = document.getElementById("panier-icon");
      const plusOne = document.createElement("div");
      plusOne.classList.add("plus-one");
      plusOne.textContent = "+1";
      panierIcon.appendChild(plusOne);
      setTimeout(() => plusOne.remove(), 1000);
    }

  document.getElementById("clearList").addEventListener("click", () => {
  localStorage.removeItem("listeCadeaux");
  localStorage.removeItem("panier");
  localStorage.removeItem("prixProduits");
  
  afficherListe();
  majPanier();
});

    window.onload = function() {
      if (produitNom) {
        let liste = getListeCadeaux();
        liste.push(produitNom);
        setListeCadeaux(liste);
        ajouterAuPanier(produitNom);
        majPanier();
        afficherModal(produitNom);
        animationPlusUn();
      }
      afficherListe();
      majPanier();
    };
  </script>
</body>
</html>
